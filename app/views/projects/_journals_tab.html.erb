<%= form_with model: [@project, Journal.new] do |f| %>
  <div class="mb-4">
    <%= f.label :week_start, "Week Start", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.date_field :week_start, class: "w-full border border-gray-300 rounded-md p-2 focus:ring-emerald-500 focus:border-emerald-500" %>
  </div>
  <div class="mb-4">
    <%= f.label :week_end, "Week End", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.date_field :week_end, class: "w-full border border-gray-300 rounded-md p-2 focus:ring-emerald-500 focus:border-emerald-500" %>
  </div>
  <div>
    <%= render(ButtonComponent.new(
      color: :blue,
      text: "Create Journal",
      type: "submit",
    )) %>
  </div>
<% end %>

<div class="mt-8">
  <h2 class="text-2xl font-bold mb-4">Journal Entries</h2>
  <% if @project.journals.empty? %>
    <p class="italic">No journal entries found.</p>
  <% else %>
    <div class="space-y-6">
      <% @project.journals.each do |journal| %>
        <a href="<%= project_journal_path(@project, journal) %>">
          <div class="p-4 border border-gray-200 rounded-lg">
            <h3 class="text-lg font-semibold mb-2">Week: <%= journal.week_start.strftime("%b %d, %Y") %>
              - <%= journal.week_end.strftime("%b %d, %Y") %></h3>
            <div class="mt-2">
              <h4 class="font-medium mb-1">Objectives:</h4>
              <% if journal.objectives.empty? %>
                <p class="italic">No objectives for this week.</p>
              <% else %>
                <ul class="list-disc list-inside">
                  <% journal.objectives.each do |objective| %>
                    <li class="mb-1">
                      <span class="text-sm text-gray-700"><%= objective.description %></span>
                      <span class="font-mono text-xs <%= objective.status === 'pending' ? 'text-yellow-500' : 'text-emerald-500' %>">
                        (<%= objective.status.capitalize %>)</span>
                    </li>
                  <% end %>
                </ul>
              <% end %>
            </div>
          </div>
        </a>
      <% end %>
    </div>
  <% end %>
</div>